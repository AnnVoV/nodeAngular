<!DOCTYPE html>
<html ng-app="carApp">
<head>
    <title></title>
    <link href="css/bootstrap.css" rel="stylesheet" media="screen">
    <link href="css/comm/datetimepicker.css" rel="stylesheet" media="screen">
</head>

<body ng-controller="carController">
    <div>
        <!-- <div>
            <span>Paint pots</span>
            <input type="text">
            <span>$3.95</span>
            <span></span>
        </div>
        <div>
            <span>Polka dots</span>
            <input type="text">
            <span>$12.95</span>
            <span></span>
        </div>
        <div>
            <span>Pebbles</span>
            <input type="text">
            <span>$6.95</span>
            <span></span>
        </div> -->
        <div ng-repeat="item in items">
            <span>{{item.title}}</span>
            <input ng-model="item.quantity"/>
            <span>{{item.price}}</span>
            <span>{{item.price*item.quantity | currency}}</span>
            <button ng-click="remove($index)">Remove</button>
        </div>
        <div>Total:<span>{{totalAccount()|currency}}</span></div>
        <div>Discount:<span>{{discount}}</span></div>
        <div>Subtotal:<span>{{subtotal()|currency}}</span></div>
    </div>

<script src="js/comm/jquery.min.js"></script>
<script src="js/comm/calendar.js"></script>
<script src="js/comm/bootstrap.min.js"></script>
<script src="js/comm/bootstrap-datetimepicker.fr.js"></script>
<script src="js/comm/angular.js"></script>
<script>
    var carApp = angular.module('carApp',[]);

    var carController = carApp.controller('carController',function($scope){
        $scope.items = [
            {title:'A',quantity:8,price:3.95},
            {title:'B',quantity:17,price:12.95},
            {title:'C',quantity:5,price:6.95}
        ];

        $scope.discount = 10;

        $scope.totalAccount = function(){
            var total = 0;
            for( var i = 0; i < $scope.items.length; i++ ){
                total = total + $scope.items[i].price * $scope.items[i].quantity;
            }
            return total;
        }

        $scope.subtotal = function(){
            return $scope.totalAccount() - $scope.discount;
        }

        function calculateDiscount(newValue,oldValue,scope){
            $scope.discount = newValue>100 ? 10 : 0;
        }


        $scope.remove = function(index){
            $scope.items.splice(index,1);
        }
    });
</script>

</body>
</html>